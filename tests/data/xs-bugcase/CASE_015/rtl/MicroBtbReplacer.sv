// Generated by CIRCT firtool-1.135.0

// Include register initializers in init blocks unless synthesis is set
`ifndef RANDOMIZE
  `ifdef RANDOMIZE_REG_INIT
    `define RANDOMIZE
  `endif // RANDOMIZE_REG_INIT
`endif // not def RANDOMIZE
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_REG_
    `define ENABLE_INITIAL_REG_
  `endif // not def ENABLE_INITIAL_REG_
`endif // not def SYNTHESIS

// Standard header to adapt well known macros for register randomization.

// RANDOM may be set to an expression that produces a 32-bit random unsigned value.
`ifndef RANDOM
  `define RANDOM $random
`endif // not def RANDOM

// Users can define INIT_RANDOM as general code that gets injected into the
// initializer block for modules with registers.
`ifndef INIT_RANDOM
  `define INIT_RANDOM
`endif // not def INIT_RANDOM

// If using random initialization, you can also define RANDOMIZE_DELAY to
// customize the delay used, otherwise 0.002 is used.
`ifndef RANDOMIZE_DELAY
  `define RANDOMIZE_DELAY 0.002
`endif // not def RANDOMIZE_DELAY

// Define INIT_RANDOM_PROLOG_ for use in our modules below.
`ifndef INIT_RANDOM_PROLOG_
  `ifdef RANDOMIZE
    `ifdef VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM
    `else  // VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM #`RANDOMIZE_DELAY begin end
    `endif // VERILATOR
  `else  // RANDOMIZE
    `define INIT_RANDOM_PROLOG_
  `endif // RANDOMIZE
`endif // not def INIT_RANDOM_PROLOG_
module MicroBtbReplacer(
  input        clock,
  input        reset,
  input        io_predTouch_valid,
  input  [4:0] io_predTouch_bits,
  input        io_trainTouch_valid,
  input  [4:0] io_trainTouch_bits,
  input  [1:0] io_usefulCnt_0_value,
  input  [1:0] io_usefulCnt_1_value,
  input  [1:0] io_usefulCnt_2_value,
  input  [1:0] io_usefulCnt_3_value,
  input  [1:0] io_usefulCnt_4_value,
  input  [1:0] io_usefulCnt_5_value,
  input  [1:0] io_usefulCnt_6_value,
  input  [1:0] io_usefulCnt_7_value,
  input  [1:0] io_usefulCnt_8_value,
  input  [1:0] io_usefulCnt_9_value,
  input  [1:0] io_usefulCnt_10_value,
  input  [1:0] io_usefulCnt_11_value,
  input  [1:0] io_usefulCnt_12_value,
  input  [1:0] io_usefulCnt_13_value,
  input  [1:0] io_usefulCnt_14_value,
  input  [1:0] io_usefulCnt_15_value,
  input  [1:0] io_usefulCnt_16_value,
  input  [1:0] io_usefulCnt_17_value,
  input  [1:0] io_usefulCnt_18_value,
  input  [1:0] io_usefulCnt_19_value,
  input  [1:0] io_usefulCnt_20_value,
  input  [1:0] io_usefulCnt_21_value,
  input  [1:0] io_usefulCnt_22_value,
  input  [1:0] io_usefulCnt_23_value,
  input  [1:0] io_usefulCnt_24_value,
  input  [1:0] io_usefulCnt_25_value,
  input  [1:0] io_usefulCnt_26_value,
  input  [1:0] io_usefulCnt_27_value,
  input  [1:0] io_usefulCnt_28_value,
  input  [1:0] io_usefulCnt_29_value,
  input  [1:0] io_usefulCnt_30_value,
  input  [1:0] io_usefulCnt_31_value,
  output [4:0] io_victim,
  output       io_perf_replaceNotUseful
);

  reg  [30:0] state_reg;
  wire        notUsefulVec_0 = io_usefulCnt_0_value == 2'h0;
  wire        notUsefulVec_1 = io_usefulCnt_1_value == 2'h0;
  wire        notUsefulVec_2 = io_usefulCnt_2_value == 2'h0;
  wire        notUsefulVec_3 = io_usefulCnt_3_value == 2'h0;
  wire        notUsefulVec_4 = io_usefulCnt_4_value == 2'h0;
  wire        notUsefulVec_5 = io_usefulCnt_5_value == 2'h0;
  wire        notUsefulVec_6 = io_usefulCnt_6_value == 2'h0;
  wire        notUsefulVec_7 = io_usefulCnt_7_value == 2'h0;
  wire        notUsefulVec_8 = io_usefulCnt_8_value == 2'h0;
  wire        notUsefulVec_9 = io_usefulCnt_9_value == 2'h0;
  wire        notUsefulVec_10 = io_usefulCnt_10_value == 2'h0;
  wire        notUsefulVec_11 = io_usefulCnt_11_value == 2'h0;
  wire        notUsefulVec_12 = io_usefulCnt_12_value == 2'h0;
  wire        notUsefulVec_13 = io_usefulCnt_13_value == 2'h0;
  wire        notUsefulVec_14 = io_usefulCnt_14_value == 2'h0;
  wire        notUsefulVec_15 = io_usefulCnt_15_value == 2'h0;
  wire        notUsefulVec_16 = io_usefulCnt_16_value == 2'h0;
  wire        notUsefulVec_17 = io_usefulCnt_17_value == 2'h0;
  wire        notUsefulVec_18 = io_usefulCnt_18_value == 2'h0;
  wire        notUsefulVec_19 = io_usefulCnt_19_value == 2'h0;
  wire        notUsefulVec_20 = io_usefulCnt_20_value == 2'h0;
  wire        notUsefulVec_21 = io_usefulCnt_21_value == 2'h0;
  wire        notUsefulVec_22 = io_usefulCnt_22_value == 2'h0;
  wire        notUsefulVec_23 = io_usefulCnt_23_value == 2'h0;
  wire        notUsefulVec_24 = io_usefulCnt_24_value == 2'h0;
  wire        notUsefulVec_25 = io_usefulCnt_25_value == 2'h0;
  wire        notUsefulVec_26 = io_usefulCnt_26_value == 2'h0;
  wire        notUsefulVec_27 = io_usefulCnt_27_value == 2'h0;
  wire        notUsefulVec_28 = io_usefulCnt_28_value == 2'h0;
  wire        notUsefulVec_29 = io_usefulCnt_29_value == 2'h0;
  wire        notUsefulVec_30 = io_usefulCnt_30_value == 2'h0;
  wire        notUseful =
    notUsefulVec_0 | notUsefulVec_1 | notUsefulVec_2 | notUsefulVec_3 | notUsefulVec_4
    | notUsefulVec_5 | notUsefulVec_6 | notUsefulVec_7 | notUsefulVec_8 | notUsefulVec_9
    | notUsefulVec_10 | notUsefulVec_11 | notUsefulVec_12 | notUsefulVec_13
    | notUsefulVec_14 | notUsefulVec_15 | notUsefulVec_16 | notUsefulVec_17
    | notUsefulVec_18 | notUsefulVec_19 | notUsefulVec_20 | notUsefulVec_21
    | notUsefulVec_22 | notUsefulVec_23 | notUsefulVec_24 | notUsefulVec_25
    | notUsefulVec_26 | notUsefulVec_27 | notUsefulVec_28 | notUsefulVec_29
    | notUsefulVec_30 | io_usefulCnt_31_value == 2'h0;
  wire [14:0] _state_reg_T_52 =
    io_predTouch_bits[4]
      ? {~(io_predTouch_bits[3]),
         io_predTouch_bits[3]
           ? {~(io_predTouch_bits[2]),
              io_predTouch_bits[2]
                ? {~(io_predTouch_bits[1]),
                   io_predTouch_bits[1] ? ~(io_predTouch_bits[0]) : state_reg[26],
                   io_predTouch_bits[1] ? state_reg[25] : ~(io_predTouch_bits[0])}
                : state_reg[27:25],
              io_predTouch_bits[2]
                ? state_reg[24:22]
                : {~(io_predTouch_bits[1]),
                   io_predTouch_bits[1] ? ~(io_predTouch_bits[0]) : state_reg[23],
                   io_predTouch_bits[1] ? state_reg[22] : ~(io_predTouch_bits[0])}}
           : state_reg[28:22],
         io_predTouch_bits[3]
           ? state_reg[21:15]
           : {~(io_predTouch_bits[2]),
              io_predTouch_bits[2]
                ? {~(io_predTouch_bits[1]),
                   io_predTouch_bits[1] ? ~(io_predTouch_bits[0]) : state_reg[19],
                   io_predTouch_bits[1] ? state_reg[18] : ~(io_predTouch_bits[0])}
                : state_reg[20:18],
              io_predTouch_bits[2]
                ? state_reg[17:15]
                : {~(io_predTouch_bits[1]),
                   io_predTouch_bits[1] ? ~(io_predTouch_bits[0]) : state_reg[16],
                   io_predTouch_bits[1] ? state_reg[15] : ~(io_predTouch_bits[0])}}}
      : state_reg[29:15];
  wire [14:0] _state_reg_T_105 =
    io_predTouch_bits[4]
      ? state_reg[14:0]
      : {~(io_predTouch_bits[3]),
         io_predTouch_bits[3]
           ? {~(io_predTouch_bits[2]),
              io_predTouch_bits[2]
                ? {~(io_predTouch_bits[1]),
                   io_predTouch_bits[1] ? ~(io_predTouch_bits[0]) : state_reg[11],
                   io_predTouch_bits[1] ? state_reg[10] : ~(io_predTouch_bits[0])}
                : state_reg[12:10],
              io_predTouch_bits[2]
                ? state_reg[9:7]
                : {~(io_predTouch_bits[1]),
                   io_predTouch_bits[1] ? ~(io_predTouch_bits[0]) : state_reg[8],
                   io_predTouch_bits[1] ? state_reg[7] : ~(io_predTouch_bits[0])}}
           : state_reg[13:7],
         io_predTouch_bits[3]
           ? state_reg[6:0]
           : {~(io_predTouch_bits[2]),
              io_predTouch_bits[2]
                ? {~(io_predTouch_bits[1]),
                   io_predTouch_bits[1] ? ~(io_predTouch_bits[0]) : state_reg[4],
                   io_predTouch_bits[1] ? state_reg[3] : ~(io_predTouch_bits[0])}
                : state_reg[5:3],
              io_predTouch_bits[2]
                ? state_reg[2:0]
                : {~(io_predTouch_bits[1]),
                   io_predTouch_bits[1] ? ~(io_predTouch_bits[0]) : state_reg[1],
                   io_predTouch_bits[1] ? state_reg[0] : ~(io_predTouch_bits[0])}}};
  wire [29:0] _state_reg_T_107 =
    io_predTouch_valid ? {_state_reg_T_52, _state_reg_T_105} : state_reg[29:0];
  always @(posedge clock or posedge reset) begin
    if (reset)
      state_reg <= 31'h0;
    else if (io_predTouch_valid | io_trainTouch_valid) begin
      if (io_trainTouch_valid)
        state_reg <=
          {~(io_trainTouch_bits[4]),
           io_trainTouch_bits[4]
             ? {~(io_trainTouch_bits[3]),
                io_trainTouch_bits[3]
                  ? {~(io_trainTouch_bits[2]),
                     io_trainTouch_bits[2]
                       ? {~(io_trainTouch_bits[1]),
                          io_trainTouch_bits[1]
                            ? ~(io_trainTouch_bits[0])
                            : _state_reg_T_107[26],
                          io_trainTouch_bits[1]
                            ? _state_reg_T_107[25]
                            : ~(io_trainTouch_bits[0])}
                       : _state_reg_T_107[27:25],
                     io_trainTouch_bits[2]
                       ? _state_reg_T_107[24:22]
                       : {~(io_trainTouch_bits[1]),
                          io_trainTouch_bits[1]
                            ? ~(io_trainTouch_bits[0])
                            : _state_reg_T_107[23],
                          io_trainTouch_bits[1]
                            ? _state_reg_T_107[22]
                            : ~(io_trainTouch_bits[0])}}
                  : _state_reg_T_107[28:22],
                io_trainTouch_bits[3]
                  ? _state_reg_T_107[21:15]
                  : {~(io_trainTouch_bits[2]),
                     io_trainTouch_bits[2]
                       ? {~(io_trainTouch_bits[1]),
                          io_trainTouch_bits[1]
                            ? ~(io_trainTouch_bits[0])
                            : _state_reg_T_107[19],
                          io_trainTouch_bits[1]
                            ? _state_reg_T_107[18]
                            : ~(io_trainTouch_bits[0])}
                       : _state_reg_T_107[20:18],
                     io_trainTouch_bits[2]
                       ? _state_reg_T_107[17:15]
                       : {~(io_trainTouch_bits[1]),
                          io_trainTouch_bits[1]
                            ? ~(io_trainTouch_bits[0])
                            : _state_reg_T_107[16],
                          io_trainTouch_bits[1]
                            ? _state_reg_T_107[15]
                            : ~(io_trainTouch_bits[0])}}}
             : _state_reg_T_107[29:15],
           io_trainTouch_bits[4]
             ? _state_reg_T_107[14:0]
             : {~(io_trainTouch_bits[3]),
                io_trainTouch_bits[3]
                  ? {~(io_trainTouch_bits[2]),
                     io_trainTouch_bits[2]
                       ? {~(io_trainTouch_bits[1]),
                          io_trainTouch_bits[1]
                            ? ~(io_trainTouch_bits[0])
                            : _state_reg_T_107[11],
                          io_trainTouch_bits[1]
                            ? _state_reg_T_107[10]
                            : ~(io_trainTouch_bits[0])}
                       : _state_reg_T_107[12:10],
                     io_trainTouch_bits[2]
                       ? _state_reg_T_107[9:7]
                       : {~(io_trainTouch_bits[1]),
                          io_trainTouch_bits[1]
                            ? ~(io_trainTouch_bits[0])
                            : _state_reg_T_107[8],
                          io_trainTouch_bits[1]
                            ? _state_reg_T_107[7]
                            : ~(io_trainTouch_bits[0])}}
                  : _state_reg_T_107[13:7],
                io_trainTouch_bits[3]
                  ? _state_reg_T_107[6:0]
                  : {~(io_trainTouch_bits[2]),
                     io_trainTouch_bits[2]
                       ? {~(io_trainTouch_bits[1]),
                          io_trainTouch_bits[1]
                            ? ~(io_trainTouch_bits[0])
                            : _state_reg_T_107[4],
                          io_trainTouch_bits[1]
                            ? _state_reg_T_107[3]
                            : ~(io_trainTouch_bits[0])}
                       : _state_reg_T_107[5:3],
                     io_trainTouch_bits[2]
                       ? _state_reg_T_107[2:0]
                       : {~(io_trainTouch_bits[1]),
                          io_trainTouch_bits[1]
                            ? ~(io_trainTouch_bits[0])
                            : _state_reg_T_107[1],
                          io_trainTouch_bits[1]
                            ? _state_reg_T_107[0]
                            : ~(io_trainTouch_bits[0])}}}};
      else if (io_predTouch_valid)
        state_reg <= {~(io_predTouch_bits[4]), _state_reg_T_52, _state_reg_T_105};
    end
  end // always @(posedge, posedge)
  `ifdef ENABLE_INITIAL_REG_
    `ifdef FIRRTL_BEFORE_INITIAL
      `FIRRTL_BEFORE_INITIAL
    `endif // FIRRTL_BEFORE_INITIAL
    logic [31:0] _RANDOM[0:0];
    initial begin
      `ifdef INIT_RANDOM_PROLOG_
        `INIT_RANDOM_PROLOG_
      `endif // INIT_RANDOM_PROLOG_
      `ifdef RANDOMIZE_REG_INIT
        _RANDOM[/*Zero width*/ 1'b0] = `RANDOM;
        state_reg = _RANDOM[/*Zero width*/ 1'b0][30:0];
      `endif // RANDOMIZE_REG_INIT
      if (reset)
        state_reg = 31'h0;
    end // initial
    `ifdef FIRRTL_AFTER_INITIAL
      `FIRRTL_AFTER_INITIAL
    `endif // FIRRTL_AFTER_INITIAL
  `endif // ENABLE_INITIAL_REG_
  assign io_victim =
    notUseful
      ? (notUsefulVec_0
           ? 5'h0
           : notUsefulVec_1
               ? 5'h1
               : notUsefulVec_2
                   ? 5'h2
                   : notUsefulVec_3
                       ? 5'h3
                       : notUsefulVec_4
                           ? 5'h4
                           : notUsefulVec_5
                               ? 5'h5
                               : notUsefulVec_6
                                   ? 5'h6
                                   : notUsefulVec_7
                                       ? 5'h7
                                       : notUsefulVec_8
                                           ? 5'h8
                                           : notUsefulVec_9
                                               ? 5'h9
                                               : notUsefulVec_10
                                                   ? 5'hA
                                                   : notUsefulVec_11
                                                       ? 5'hB
                                                       : notUsefulVec_12
                                                           ? 5'hC
                                                           : notUsefulVec_13
                                                               ? 5'hD
                                                               : notUsefulVec_14
                                                                   ? 5'hE
                                                                   : notUsefulVec_15
                                                                       ? 5'hF
                                                                       : notUsefulVec_16
                                                                           ? 5'h10
                                                                           : notUsefulVec_17
                                                                               ? 5'h11
                                                                               : notUsefulVec_18
                                                                                   ? 5'h12
                                                                                   : notUsefulVec_19
                                                                                       ? 5'h13
                                                                                       : notUsefulVec_20
                                                                                           ? 5'h14
                                                                                           : notUsefulVec_21
                                                                                               ? 5'h15
                                                                                               : notUsefulVec_22
                                                                                                   ? 5'h16
                                                                                                   : notUsefulVec_23
                                                                                                       ? 5'h17
                                                                                                       : notUsefulVec_24
                                                                                                           ? 5'h18
                                                                                                           : notUsefulVec_25
                                                                                                               ? 5'h19
                                                                                                               : notUsefulVec_26
                                                                                                                   ? 5'h1A
                                                                                                                   : notUsefulVec_27
                                                                                                                       ? 5'h1B
                                                                                                                       : notUsefulVec_28
                                                                                                                           ? 5'h1C
                                                                                                                           : notUsefulVec_29
                                                                                                                               ? 5'h1D
                                                                                                                               : {4'hF,
                                                                                                                                  ~notUsefulVec_30})
      : {state_reg[30],
         state_reg[30]
           ? {state_reg[29],
              state_reg[29]
                ? {state_reg[28],
                   state_reg[28]
                     ? {state_reg[27], state_reg[27] ? state_reg[26] : state_reg[25]}
                     : {state_reg[24], state_reg[24] ? state_reg[23] : state_reg[22]}}
                : {state_reg[21],
                   state_reg[21]
                     ? {state_reg[20], state_reg[20] ? state_reg[19] : state_reg[18]}
                     : {state_reg[17], state_reg[17] ? state_reg[16] : state_reg[15]}}}
           : {state_reg[14],
              state_reg[14]
                ? {state_reg[13],
                   state_reg[13]
                     ? {state_reg[12], state_reg[12] ? state_reg[11] : state_reg[10]}
                     : {state_reg[9], state_reg[9] ? state_reg[8] : state_reg[7]}}
                : {state_reg[6],
                   state_reg[6]
                     ? {state_reg[5], state_reg[5] ? state_reg[4] : state_reg[3]}
                     : {state_reg[2], state_reg[2] ? state_reg[1] : state_reg[0]}}}};
  assign io_perf_replaceNotUseful = notUseful;
endmodule

